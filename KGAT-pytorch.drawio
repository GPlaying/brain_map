<mxfile host="app.diagrams.net" modified="2022-11-07T12:44:13.939Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36" etag="K2xKxTzJzizASp3gkK0U" version="20.5.1" type="github">
  <diagram id="HvYnHT6d6fSKdx_S830e" name="第 1 页">
    <mxGraphModel dx="2221" dy="772" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-1" value="Main_KGAT" style="swimlane;startSize=20;horizontal=1;containerType=tree;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="290" y="130" width="510" height="240" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-5" value="evaluate" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#ffe6cc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#d79b00;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-1">
          <mxGeometry x="30" y="30" width="200" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-123" value="return cf_scores, metrics_dict" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-5">
          <mxGeometry y="26" width="200" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-9" value="train" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#ffe6cc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#d79b00;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-1">
          <mxGeometry x="320" y="150" width="140" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-13" value="predict" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#ffe6cc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#d79b00;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-1">
          <mxGeometry x="30" y="150" width="140" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-17" value="___main__" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#ffe6cc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#d79b00;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-1">
          <mxGeometry x="320" y="32" width="140" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-18" value="Parser_KGAT" style="swimlane;startSize=20;horizontal=1;containerType=tree;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1180" y="120" width="260" height="230" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-19" value="parse_kgat_args" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#fff2cc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#d6b656;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-18">
          <mxGeometry x="60" y="68" width="140" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-96" value="return args" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-19">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-23" value="Loader_base : DataLoaderBase" style="swimlane;startSize=20;horizontal=1;containerType=tree;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="-400" y="480" width="820" height="560" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-24" value="load_cf" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="30" y="30" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-42" value="return (user, item), user_dict" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-24">
          <mxGeometry y="26" width="190" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-26" value="load_kg" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="30" y="120" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-44" value="return kg_data" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-26">
          <mxGeometry y="26" width="140" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-28" value="sample_neg_items_for_u" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="30" y="230" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-46" value="return sample_neg_items" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-28">
          <mxGeometry y="26" width="180" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-29" value="generate_cf_batch" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="430" y="230" width="300" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-47" value="return batch_user, batch_pos_item, batch_neg_item" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-29">
          <mxGeometry y="26" width="300" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-30" value="sample_pos_triples_for_h" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="30" y="330" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-48" value="return sample_relations, sample_pos_tails" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-30">
          <mxGeometry y="26" width="240" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-31" value="sample_neg_triples_for_h" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="550" y="320" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-49" value="return sample_neg_tails" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-31">
          <mxGeometry y="26" width="180" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-32" value="generate_kg_batch" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="10" y="430" width="370" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-50" value="return batch_head, batch_relation, batch_pos_tail, batch_neg_tail" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-32">
          <mxGeometry y="26" width="370" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-33" value="load_pretrained_data" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="550" y="430" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-51" value="加载预训练数据" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-33">
          <mxGeometry y="26" width="180" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-25" value="statistic_cf" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="590" y="40" width="140" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-39" value="统计数据" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-25">
          <mxGeometry y="26" width="140" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-27" value="sample_pos_items_for_u" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#f8cecc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#b85450;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-23">
          <mxGeometry x="550" y="130" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-45" value="return sample_pos_items" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-27">
          <mxGeometry y="26" width="180" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-132" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="Orb3IOBe8kNsTbs5YjRL-52" target="Orb3IOBe8kNsTbs5YjRL-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-52" value="Loader_kgat : DataLoaderKGAT" style="swimlane;startSize=20;horizontal=1;containerType=tree;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="460" y="1120" width="750" height="360" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-53" value="construct_data" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#e1d5e7;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#9673a6;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-52">
          <mxGeometry x="30" y="30" width="190" height="122" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-54" value="# add inverse kg data" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-53">
          <mxGeometry y="26" width="190" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-74" value="# re-map user id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-53">
          <mxGeometry y="50" width="190" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-75" value="# add interactions to kg data" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-53">
          <mxGeometry y="74" width="190" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-76" value="# construct kg dict" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-53">
          <mxGeometry y="98" width="190" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-57" value="print_info" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#e1d5e7;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#9673a6;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-52">
          <mxGeometry x="30" y="230" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-69" value="convert_coo2tensor" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#e1d5e7;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#9673a6;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-52">
          <mxGeometry x="420" y="40" width="310" height="52" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-70" value="return torch.sparse.FloatTensor(i, v, torch.Size(shape))" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-69">
          <mxGeometry y="26" width="310" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-71" value="create_laplacian_dict" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#e1d5e7;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#9673a6;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-52">
          <mxGeometry x="440" y="216" width="210" height="78" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-77" value="def symmetric_norm_lap(adj)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-71">
          <mxGeometry y="26" width="210" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-78" value="def random_walk_norm_lap(adj)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-71">
          <mxGeometry y="52" width="210" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-79" value="Model : KGAT" style="swimlane;startSize=20;horizontal=1;containerType=tree;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-310" y="1460" width="750" height="330" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-80" value="Aggregator(nn.Module)" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#d5e8d4;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#82b366;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-79">
          <mxGeometry x="30" y="30" width="250" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-81" value="def forward(self, ego_embeddings, A_in)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-80">
          <mxGeometry y="26" width="250" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-85" value="_L2_loss_mean" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#d5e8d4;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#82b366;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-79">
          <mxGeometry x="30" y="230" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-88" value="KGAT(nn.Module)" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#d5e8d4;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#82b366;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-79">
          <mxGeometry x="360" y="40" width="350" height="208" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-89" value="def calc_cf_embeddings(self)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="26" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-90" value="def calc_cf_loss(self, user_ids, item_pos_ids, item_neg_ids)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="52" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-91" value="def calc_kg_loss(self, h, r, pos_t, neg_t)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="78" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-92" value="def update_attention_batch(self, h_list, t_list, r_idx)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="104" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-93" value="def update_attention(self, h_list, t_list, r_list, relations)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="130" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-94" value="def calc_score(self, user_ids, item_ids)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="156" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-95" value="def forward(self, *input, mode)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-88">
          <mxGeometry y="182" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-97" value="Utils" style="swimlane;startSize=20;horizontal=1;containerType=tree;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="900" y="570" width="760" height="420" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-98" value="log_helper" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#dae8fc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#6c8ebf;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-97">
          <mxGeometry x="30" y="30" width="250" height="122" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-99" value="def create_log_id(dir_path)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-98">
          <mxGeometry y="26" width="250" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-109" value="def logging_config()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-98">
          <mxGeometry y="50" width="250" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-110" value="def create_log_id(dir_path)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-98">
          <mxGeometry y="74" width="250" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-111" value="def create_log_id(dir_path)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-98">
          <mxGeometry y="98" width="250" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-100" value="model_helper" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#dae8fc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#6c8ebf;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-97">
          <mxGeometry x="30" y="230" width="260" height="98" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-119" value="def early_stopping(recall_list, stopping_steps)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-100">
          <mxGeometry y="26" width="260" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-120" value="def save_model()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-100">
          <mxGeometry y="50" width="260" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-121" value="def load_model(model, model_path)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-100">
          <mxGeometry y="74" width="260" height="24" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-101" value="metrics" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=#dae8fc;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#6c8ebf;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-97">
          <mxGeometry x="360" y="40" width="350" height="364" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-102" value="def calc_recall(rank, ground_truth, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="26" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-103" value="def precision_at_k(hit, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="52" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-104" value="def precision_at_k_batch(hits, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="78" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-105" value="def average_precision(hit, cut)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="104" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-106" value="def dcg_at_k(rel, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="130" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-107" value="def ndcg_at_k(rel, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="156" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-108" value="def ndcg_at_k_batch(hits, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="182" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-112" value="def recall_at_k(hit, k, all_pos_num)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="208" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-113" value="def recall_at_k_batch(hits, k)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="234" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-114" value="def F1(pre, rec)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="260" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-115" value="def calc_auc(ground_truth, prediction)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="286" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-116" value="def logloss(ground_truth, prediction)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="312" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-117" value="def calc_metrics_at_k" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="Orb3IOBe8kNsTbs5YjRL-101">
          <mxGeometry y="338" width="350" height="26" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-127" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.231;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="Orb3IOBe8kNsTbs5YjRL-17" target="Orb3IOBe8kNsTbs5YjRL-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-128" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="Orb3IOBe8kNsTbs5YjRL-19" target="Orb3IOBe8kNsTbs5YjRL-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-130" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=1;entryDx=0;entryDy=0;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=none;endFill=0;" edge="1" parent="1" source="Orb3IOBe8kNsTbs5YjRL-99" target="Orb3IOBe8kNsTbs5YjRL-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Orb3IOBe8kNsTbs5YjRL-131" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=1;entryDx=0;entryDy=0;dashed=1;endArrow=none;endFill=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="Orb3IOBe8kNsTbs5YjRL-109" target="Orb3IOBe8kNsTbs5YjRL-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
